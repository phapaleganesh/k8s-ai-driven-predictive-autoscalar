[supervisord]
nodaemon=true
# Disable supervisord's own logfile rotation so it doesn't try to seek on container stdout
logfile=/dev/null
logfile_maxbytes=0

[program:predictive_autoscaler]
command=python /app/predictive_autoscaler.py
# Write logs to the container stdout/stderr (non-seekable). Use /dev/stdout and /dev/stderr which are portable.
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
redirect_stderr=true
startretries=3

[program:dashboard]
# Use gunicorn (production WSGI) to run the Flask app instead of the built-in dev server
# bind to 0.0.0.0:8080 and use 2 workers; adjust worker count as needed for your environment
command=gunicorn -w 2 -b 0.0.0.0:8080 dashboard.app:app
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
redirect_stderr=true
startretries=3
